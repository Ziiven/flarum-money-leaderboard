(()=>{var e={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return e.d(t,{a:t}),t},d:(o,t)=>{for(var a in t)e.o(t,a)&&!e.o(o,a)&&Object.defineProperty(o,a,{enumerable:!0,get:t[a]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";e.r(o);const t=flarum.core.compat["forum/app"];var a=e.n(t);const r=flarum.core.compat.extend,n=flarum.core.compat["common/extend"],s=flarum.core.compat["components/IndexPage"];var d=e.n(s);const i=flarum.core.compat["components/LinkButton"];var l=e.n(i);const c=flarum.core.compat["forum/components/HeaderSecondary"];var u=e.n(c);const p=flarum.core.compat["common/components/Button"];var y=e.n(p);const f=flarum.core.compat["forum/components/SessionDropdown"];var L=e.n(f);function h(e,o){return h=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e},h(e,o)}function v(e,o){e.prototype=Object.create(o.prototype),e.prototype.constructor=e,h(e,o)}const b=flarum.core.compat["components/Page"];var M=e.n(b);const g=flarum.core.compat["common/helpers/listItems"];var x=e.n(g);const I=flarum.core.compat["components/LoadingIndicator"];var C=e.n(I);const R=flarum.core.compat["components/Button"];var k=e.n(R);const z=flarum.core.compat.Component;var N=e.n(z);const B=flarum.core.compat["components/Link"];var P=e.n(B);const w=flarum.core.compat["helpers/avatar"];var H=e.n(w);const O=flarum.core.compat["helpers/username"];var S=e.n(O),T=function(e){function o(){return e.apply(this,arguments)||this}return v(o,e),o.prototype.view=function(){var e=this.attrs,o=e.leaderboardListItem,t=e.rankID,a=app.forum.attribute("antoinefr-money.moneyname")||"[money]",r=o.attribute("money"),n=a.replace("[money]",r),s="MoneyLeaderboardListItemTrophyNone",d="MoneyLeaderboardListItemRankTop";return 1===t?s="MoneyLeaderboardListItemTrophyGold":2===t?s="MoneyLeaderboardListItemTrophySilver":3===t?s="MoneyLeaderboardListItemTrophyBronze":d="MoneyLeaderboardListItemRankLower",m("div",{className:"MoneyLeaderboardListItemContainer"},m("div",{class:"MoneyLeaderboardListHeaderRank"},m("div",{class:d},t),m("div",{class:s},m("i",{class:"fas fa-trophy"}))),m("div",{class:"MoneyLeaderboardListHeaderUser"},m(P(),{href:app.route.user(o),className:"transferHistoryUser",style:"color:var(--heading-color)"},H()(o)," ",S()(o))),m("div",{class:"MoneyLeaderboardListHeaderMoney"},n))},o}(N()),_=function(e){function o(){return e.apply(this,arguments)||this}v(o,e);var t=o.prototype;return t.oninit=function(o){e.prototype.oninit.call(this,o),this.loading=!0,this.moreResults=!1,this.moneyLeaderboardList=[],this.totalLoadCount=0,this.maxLoadCount=50,this.loadResults()},t.view=function(){var e,o=this,t=0;return this.loading&&(e=C().component({size:"large"})),m("div",{className:"IndexPage"},d().prototype.hero(),m("div",{className:"container"},m("div",{className:"sideNavContainer"},m("nav",{className:"IndexPage-nav sideNav"},m("ul",null,x()(d().prototype.sidebarItems().toArray()))),m("div",{class:"MoneyLeaderboardContainer"},m("div",{class:"MoneyLeaderboardListTitle"},app.translator.trans("ziven-money-leaderboard.forum.leaderboard-list-title")),m("div",{class:"MoneyLeaderboardListHeader"},m("div",{class:"MoneyLeaderboardListHeaderRank"},app.translator.trans("ziven-money-leaderboard.forum.leaderboard-list-rank")),m("div",{class:"MoneyLeaderboardListHeaderUser"},app.translator.trans("ziven-money-leaderboard.forum.leaderboard-list-user")),m("div",{class:"MoneyLeaderboardListHeaderMoney"},app.translator.trans("ziven-money-leaderboard.forum.leaderboard-list-money"))),m("ul",{class:"MoneyLeaderboardList"},this.moneyLeaderboardList.map((function(e){return t++,m("li",{class:"MoneyLeaderboardListItems"},T.component({leaderboardListItem:e,rankID:t}))}))),!this.loading&&0===this.moneyLeaderboardList.length&&m("div",null,m("div",{style:"font-size:1.4em;color: var(--muted-more-color);text-align: center;height: 300px;line-height: 100px;"},app.translator.trans("ziven-transfer-money.forum.transfer-list-empty"))),!e&&this.hasMoreResults()&&m("div",{style:"text-align:center;padding:20px"},m(k(),{className:"Button Button--primary",disabled:this.loading,loading:this.loading,onclick:function(){return o.loadMore()}},app.translator.trans("ziven-money-leaderboard.forum.leaderboard-load-more"))),e&&m("div",{className:"MoneyLeaderboard-loadMore"},e)))))},t.hasMoreResults=function(){return this.moreResults&&this.maxLoadCount>this.totalLoadCount},t.loadMore=function(){this.loading=!0,this.loadResults(this.moneyLeaderboardList.length,10)},t.parseResults=function(e){return this.moreResults=!!e.payload.links&&!!e.payload.links.next,[].push.apply(this.moneyLeaderboardList,e),this.loading=!1,m.redraw(),e},t.loadResults=function(e,o){if(void 0===e&&(e=0),void 0===o&&(o=20),this.maxLoadCount!==this.totalLoadCount){var t=o;return this.maxLoadCount<this.totalLoadCount+o&&(t=this.maxLoadCount-this.totalLoadCount,this.totalLoadCount=this.maxLoadCount),this.totalLoadCount+=o,app.store.find("moneyLeaderboard",{page:{offset:e,limit:t}}).catch((function(){})).then(this.parseResults.bind(this))}},o}(M());a().initializers.add("ziven-money-leaderboard",(function(){a().routes.moneyLeaderboard={path:"/moneyLeaderboard",component:_},(0,n.extend)(L().prototype,"items",(function(e){var o=a().forum.attribute("moneyLeaderBoardEntryPosition");0==o?(0,r.extend)(d().prototype,"navItems",(function(e){var o=a().forum.attribute("moneyLeaderBoardIcon");return e.add("MoneyLeaderboard",m(l(),{icon:o,href:a().route("moneyLeaderboard")},a().translator.trans("ziven-money-leaderboard.forum.leaderboard-name")),15),e})):1==o&&(0,n.extend)(u().prototype,"items",(function(e){var o=a().forum.attribute("moneyLeaderBoardIcon");e.add("MoneyLeaderboard",m(y(),{className:"Button Button--flat",style:"width:36px",onclick:function(){window.location.href=a().route("moneyLeaderboard")},icon:o}),15)}))}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map